---
# Create WYSIWYG related folders
- name: Create D7 WYSIWYG features folder
  file:
    path: "{{ drupal_core_path }}/sites/all/modules/features/hdsit_wysiwyg_config"
    owner: vagrant
    group: vagrant
    state: directory

# Get WYSIWYG feature
- name: Check out WYSIWYG settings repo.
  git:
    repo: "{{ d7_wysiwyg_repo }}"
    dest: "{{ drupal_core_path }}/sites/all/modules/features/hdsit_wysiwyg_config"
    key_file: "{{ key_file }}"
  when: drupal_domain == 'drupal7'

# Download the WYSIWYG Editor
- name: Download WYSIWYG Editor
  get_url:
    url: "http://download.cksource.com/CKEditor/CKEditor/CKEditor%203.6.6.2/ckeditor_3.6.6.2.zip"
    dest: "/tmp/ckeditor_3.6.6.2.zip"

# Unzip CKEditor
- name: Unzip ckeditor
  unarchive:
    copy: no
    src: /tmp/ckeditor_3.6.6.2.zip
    dest: "{{ drupal_core_path }}/sites/all/libraries/"
    owner: vagrant
    group: vagrant
